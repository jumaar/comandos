<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub Flow - Cheatsheet</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%239CA3AF' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><rect x='9' y='9' width='13' height='13' rx='2' ry='2'></rect><path d='M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1'></path></svg>">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        code, .font-fira { font-family: 'Fira Code', monospace; }
        .copied-feedback { position: fixed; bottom: 2rem; left: 50%; transform: translateX(-50%); padding: 0.75rem 1.5rem; border-radius: 0.5rem; background-color: #10B981; color: white; font-weight: 500; z-index: 50; opacity: 0; transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out; pointer-events: none; }
        .copied-feedback.show { opacity: 1; transform: translateX(-50%) translateY(-1rem); }
        .branch-line { width: 2px; background-color: #4B5563; flex-grow: 1; }
        .arrow-up { position: relative; padding: 2px 0; color: #6B7280; font-size: 1.5rem; line-height: 1.5rem; }
        .arrow-left { position: relative; font-size: 2rem; color: #FBBF24; transform: rotate(180deg); line-height: 1; margin-right: -1.5rem; }
        .arrow-main { position: relative; font-size: 2rem; color: #22D3EE; transform: rotate(180deg); line-height: 1; margin-right: -1.5rem; }
    </style>
</head>
<body class="bg-gray-900 text-gray-200">

    <header class="bg-gray-800/80 backdrop-blur-sm sticky top-0 z-40">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <a href="/home/jumaar/Escritorio/GITHUB-jumaar/comandos/index.html" class="text-xl font-bold text-white">Cheatsheet</a>
                </div>
                <div class="flex items-center space-x-4 text-sm font-medium">
                    <a href="/home/jumaar/Escritorio/GITHUB-jumaar/comandos/index.html" class="text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md">Comandos</a>
                    <a href="/home/jumaar/Escritorio/GITHUB-jumaar/comandos/github.html" class="text-purple-400 px-3 py-2 rounded-md bg-gray-700">GitHub Flow</a>
                    <a href="/homejumaar/Escritorio/GITHUB-jumaar/comandos/database.html" class="text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md">DB Migrations</a>
                </div>
            </div>
        </nav>
    </header>

    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        <main>
            <section id="github-versioning-section" class="bg-gray-800 p-6 rounded-lg shadow-lg">
                <h2 class="text-2xl font-bold text-purple-400 mb-4 border-b border-gray-700 pb-2">GitHub: Manejo de Versiones y Despliegue</h2>
                <div id="github-versioning-commands" class="space-y-6">
                </div>
            </section>

            <section class="mt-12">
                <header class="text-center mb-10">
                    <h2 class="text-3xl md:text-4xl font-bold text-white">Flujo de Trabajo Visual de Git</h2>
                    <p class="mt-2 text-lg text-gray-400">Desde una nueva `feature` hasta el despliegue en producción.</p>
                </header>

                <div class="bg-gray-800 p-6 rounded-lg shadow-lg font-fira text-sm">
                    <div class="flex justify-around mb-8 text-center border-b border-gray-700 pb-4">
                        <div class="w-1/3"><h3 class="text-xl font-bold text-green-400">main</h3><p class="text-xs text-gray-400">(Producción)</p></div>
                        <div class="w-1/3"><h3 class="text-xl font-bold text-cyan-400">develop</h3><p class="text-xs text-gray-400">(Integración)</p></div>
                        <div class="w-1/3"><h3 class="text-xl font-bold text-yellow-400">feature</h3><p class="text-xs text-gray-400">(Desarrollo)</p></div>
                    </div>

                    <div class="flex justify-around items-end">
                        <div class="w-1/3 flex flex-col items-center">
                            <div class="text-center p-2 bg-gray-900 rounded-md border border-green-500 w-full mb-2">
                                <p class="font-bold">v1.0.1</p>
                                <p class="text-xs text-gray-500">Nuevo Release</p>
                            </div>
                            <div class="branch-line bg-green-500" style="min-height: 1rem;"></div>
                            <div class="text-center p-2 bg-gray-700 rounded-md w-full my-2">
                                <p class="text-gray-400 text-xs mb-1 font-bold">PASO 5: ¡DESPLIEGUE!</p>
                                <code class="text-white">n. git push origin v1.0.1</code><br>
                                <code class="text-white">m. git tag -a v1.0.1 -m "..."</code><br>
                            </div>
                            <div class="arrow-up">↑</div>
                            <div class="text-center p-2 bg-gray-700 rounded-md w-full mt-2">
                                <p class="text-gray-400 text-xs mb-1 font-bold">PASO 4: Integrar en `main`</p>
                                <code class="text-white">l. git push origin main</code><br>
                                <code class="text-white">k. git merge develop</code>
                            </div>
                            <div class="branch-line bg-green-500" style="min-height: 12rem;"></div>
                            <div class="flex-grow"></div>
                            <div class="branch-line bg-green-500" style="min-height: 11rem;"></div>
                            <div class="text-center p-2 bg-gray-900 rounded-md border border-green-500 w-full mt-2">
                                <p class="font-bold">v1.0.0</p>
                                <p class="text-xs text-gray-500">Release Estable (Punto de Partida)</p>
                            </div>
                        </div>

                        <div class="w-1/3 flex flex-col items-center">
                            <div class="flex-grow" style="min-height: 10rem;"></div> 
                            <div class="flex items-center w-full justify-start pl-4">
                                <div class="arrow-main" style="transform: rotate(180deg); margin: 0 0.5rem 0 0;">→</div>
                                <div class="text-center p-2 bg-gray-700 rounded-md">
                                    <p class="text-xs text-gray-500">Merge hacia main</p>
                                </div>
                            </div>
                            <div class="branch-line bg-cyan-500" style="min-height: 1rem;"></div>
                            <div class="text-center p-2 bg-gray-700 rounded-md w-full my-2">
                                <p class="text-gray-400 text-xs mb-1 font-bold">PASO 3: Integrar `feature` y borrar feature</p>
                                <code class="text-white">j. git checkout main</code><br>
                                <code class="text-white">i. git push origin develop</code><br>
                                <p class="text-xs text-gray-500 mt-1">Actualiza el CI/CD</p>
                                <code class="text-white">h. git branch -d feature</code><br>
                                <p class="text-xs text-gray-500 mt-1">Elimina la rama de feature para no dejar basura</p>
                                <code class="text-white">g. git merge feature</code><br>
                            </div>
                            <div class="branch-line bg-cyan-500" style="min-height: 6.5rem;"></div>
                            <div class="text-center p-2 bg-gray-700 rounded-md w-full my-2">
                                 <p class="text-gray-400 text-xs mb-1 font-bold">PASO 1: Crear rama `feature`</p>
                                 <code class="text-white mt-2 inline-block">c. git checkout -b feature</code>
                            </div>
                            <div class="branch-line bg-cyan-500"></div>
                             <div class="text-center p-2 bg-gray-700 rounded-md w-full mt-2">
                                <p class="text-gray-400 text-xs mb-1 font-bold">PASO 0: Sincronizar `develop con el ultimo cambio en main`</p>
                                <code class="text-white">b. git pull origin main</code><br><p class="text-xs text-gray-500 mt-1">con esto arrancamos con la ultima vercion estable del codigo`.</p>
                                <code class="text-white">a. git pull origin develop</code><br>
                                <p class="text-xs text-gray-500 mt-1">Crea siempre una rama nueva para cada cambio. Evita trabajar directamente en `develop`.</p>
                            </div>
                        </div>

                        <div class="w-1/3 flex flex-col items-center">
                            <div class="flex-grow" style="min-height: 15rem;"></div>
                            <div class="flex items-center w-full justify-start pl-4">
                                <div class="arrow-left" style="transform: rotate(180deg); margin: 0 0.5rem 0 0;">→</div>
                                <div class="text-center p-2 bg-gray-700 rounded-md">
                                    <p class="text-xs text-gray-500">Merge hacia develop</p>
                                </div>
                            </div>
                            <div class="branch-line bg-yellow-500" style="min-height: 1rem;"></div>
                             <div class="text-center p-2 bg-gray-700 rounded-md w-full my-2">
                                <p class="text-gray-400 text-xs mb-1 font-bold">PASO 2: Commits en la rama</p>
                                <code class="text-white">f. git checkout develop</code><br>
                                <code class="text-white">e. git commit -m "cambio para aprobar"</code><br>
                                <code class="text-white">d. git add .</code>
                                <p class="text-xs text-gray-500 mt-1"> realizar todos los cambios y probar que todo funcione</p>
                             </div>
                            <div class="branch-line bg-yellow-500"></div>
                            <div class="flex-grow" style="min-height: 10rem;"></div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <div id="copy-feedback" class="copied-feedback">
        ¡Comando copiado!
    </div>

    <script>
        const githubVersioningData = {
            step1: [
                { cmd: 'git add .', desc: 'Añade todos los archivos modificados al área de preparación (staging).' },
                { cmd: 'git commit -m "Refactorización de CI/CD y preparación para release"', desc: 'Crea un commit con tus cambios en la rama local.' },
                { cmd: 'git push origin develop', desc: 'Sube tus commits a la rama remota \'develop\'. Dispara el workflow de build/test.' },
            ],
            step2: [
                { cmd: 'git checkout main', desc: 'Te cambias a la rama principal.' },
                { cmd: 'git pull origin main', desc: 'Asegúrate de tener la última versión de \'main\'.' },
                { cmd: 'git merge develop', desc: 'Fusiona los cambios de \'develop\' en \'main\'.' },
                { cmd: 'git push origin main', desc: 'Sube la rama \'main\' actualizada al repositorio remoto.' },
            ],
            step3: [
                { cmd: 'git tag -a v1.0.1 -m "Lanzamiento de la versión 1.0.1"', desc: 'Crea un tag anotado en el último commit de \'main\'.' },
                { cmd: 'git push origin v1.0.1', desc: '¡ACCIÓN FINAL! Sube el tag al remoto, iniciando el despliegue a producción.' },
            ]
        };

        function showCopyFeedback() {
            const feedbackEl = document.getElementById('copy-feedback');
            feedbackEl.classList.add('show');
            setTimeout(() => { feedbackEl.classList.remove('show'); }, 2000);
        }
        
        function copyToClipboard(text) {
            const tempTextArea = document.createElement('textarea');
            tempTextArea.value = text;
            tempTextArea.style.position = 'absolute';
            tempTextArea.style.left = '-9999px';
            document.body.appendChild(tempTextArea);
            tempTextArea.select();
            try {
                document.execCommand('copy');
                showCopyFeedback();
            } catch (err) {
                console.error('No se pudo copiar el texto: ', err);
            }
            document.body.removeChild(tempTextArea);
        }

        function createCommandHTML(commandObject) {
            const copyIconSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="pointer-events-none"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>`;
            return `<div class="flex items-center justify-between bg-gray-900 p-3 rounded-md"><div class="flex-grow"><code class="text-green-400 text-sm sm:text-base">${commandObject.cmd}</code><p class="text-xs sm:text-sm text-gray-400 mt-1">${commandObject.desc}</p></div><button class="copy-btn flex-shrink-0 ml-4 p-2 rounded-md bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white transition-colors duration-200" title="Copiar comando">${copyIconSVG}</button></div>`;
        }
        
        function renderVersioningCommands() {
            const container = document.getElementById('github-versioning-commands');
            if (!container) return;
            const sections = {
                'Paso 1: Asegurar y Subir tus Cambios en `develop`': githubVersioningData.step1,
                'Paso 2: Integrar los Cambios en la Rama Principal (`main`)': githubVersioningData.step2,
                'Paso 3: Crear y Publicar el Tag de Lanzamiento': githubVersioningData.step3,
            };
            let finalHTML = '';
            for (const title in sections) {
                finalHTML += `<div class="step"><h3 class="text-lg font-semibold text-gray-100 mb-3">${title}</h3><div class="space-y-3">`;
                sections[title].forEach(cmdObj => { finalHTML += createCommandHTML(cmdObj); });
                finalHTML += `</div></div>`;
            }
            container.innerHTML = finalHTML;
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderVersioningCommands();
            const mainContainer = document.querySelector('.container');
            mainContainer.addEventListener('click', (event) => {
                const copyButton = event.target.closest('.copy-btn');
                if (copyButton) {
                    const commandContainer = copyButton.closest('.flex');
                    const commandText = commandContainer.querySelector('code').innerText;
                    copyToClipboard(commandText);
                }
            });
        });
    </script>
</body>
</html>